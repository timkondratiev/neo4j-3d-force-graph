<head>
    <style>
        body {
            margin: 0;
        }
    </style>

    <script src="//unpkg.com/3d-force-graph"></script>
    <script src="SBOM.js"></script>
    <!--<script src="../../dist/3d-force-graph.js"></script>-->
</head>

<body>
    <div id="3d-graph"></div>

    <script>
        // Random tree
        const N = 300;
        // const gData = {
        //     nodes: [...Array(N).keys()].map(i => ({ id: i })),
        //     links: [...Array(N).keys()]
        //         .filter(id => id)
        //         .map(id => ({
        //             source: id,
        //             target: Math.round(Math.random() * (id - 1))
        //         }))
        // };

        const gData = {
            nodes: sbom.dependencies.map(i => ({id: 0, name: i.ref})),
            // links: []
            links: sbom.dependencies.filter(i => i.dependsOn).map(i => ({source: i.ref, target: i.dependsOn}))
        }


        for (i in sbom.dependencies) {

            for (j in i.dependsOn) {
                gData.links.push({source: i.ref, target: j})
                console.log("pushed")
            }

        }

        console.log(gData)

        // const Graph = ForceGraph3D()
        //     (document.getElementById('3d-graph'))
        //     .graphData(gData);
    </script>
</body>